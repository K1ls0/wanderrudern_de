<!DOCTYPE html>
<html lang="de" class="h-full">
    <head>
        <!--<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>-->
        <!--<script src="https://unpkg.com/lunr/lunr.js"></script>-->

        {{ partial "head-meta.html" }}

        <script type="text/javascript" src="{{ (resources.Get "js/cookies.js").Permalink }}"></script>

        {{- $styles := resources.Get "css/styles.css"
            | postCSS (dict "config" "../../assets/css/postcss.config.js") -}}
        {{- $styles := $styles | minify | fingerprint | css.PostCSS -}}

        {{ $styles = $styles | minify | fingerprint | resources.PostProcess }}
        <!--{{ if hugo.IsProduction }}
        {{ else }}
            <script src="https://cdn.tailwindcss.com"></script>
        {{ end }}-->

        <link rel="stylesheet" href="{{ $styles.Permalink }}">
        <style>
          @font-face {
            font-family: Noto Sans;
            src: url({{ (resources.Get "/bundle/noto-sans/NotoSans-Regular.ttf").Permalink }}) format('truetype');
          }
        </style>

        {{$css_options := dict
            "vars" (dict 
                "font_url" (resources.Get .Site.Params.font_url).Permalink
                "backdrop_image" (resources.Get .Site.Params.backdrop_image).Permalink
            )
        }}
        {{ $style_main := resources.Get "sass/main.scss" | css.Sass $css_options | resources.Minify }}
        <link rel="stylesheet" href={{ $style_main.Permalink }}>
        {{ $style_slideshow := resources.Get "sass/slideshow.scss" | css.Sass | resources.Minify }}
        <link rel="stylesheet" href={{ $style_slideshow.Permalink }}>

        <!--{{ $style_bericht := resources.Get "sass/bericht.scss" | css.Sass | resources.Minify }}-->

        {{ with .OutputFormats.Get "rss" -}}
            {{ printf `<link rel="%s" type="%s" href="%s" title="%s"></link>` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
        {{ end -}}

        <meta name="publisher" content="{{.Site.Params.meta.publisher}}">
        <meta name="copyright" content="{{.Site.Params.meta.copyright}}">
        <meta name="page-topic" content="{{.Site.Params.meta.page_topic}}">
        <meta name="page-type" content="{{.Site.Params.meta.page_type}}">
        <meta name="revisit-after" content="{{.Site.Params.meta.revisit_after}}">

        {{ with .Site.Params.meta.default_tags }}
        <meta name="keywords" content=" 
            {{- range $index, $ctag := . -}}
                {{- if $index -}},{{- end -}} {{- $ctag | safeHTML -}}
            {{- end -}} ">
        {{ end }}

        {{ partial "analytics.html" . }}

        {{ block "head" .}} {{ end }}

    </head>
    
    <body class="h-full flex flex-col">
        {{ partial "nav.html" . }}
        <div class="min-h-full w-full h-auto fixed top-0 left-0
                bg-white -z-10 bg-center bg-cover bg-no-repeat
                blur opacity-90"
             style="background-image: url(&quot;{{ (resources.Get .Site.Params.backdrop_image).Permalink }}&quot;);"></div>
        <main class="flex flex-col items-center flex-grow">
            <div class="flex flex-grow xs:w-25 sm:w-full lg:w-[60rem] mt-20"
                id="content-container">
                <div class="flex flex-grow flex-col flex-nowrap 
                    items-stretch m-0 mb-14 p-14
                    rounded-lg bg-gray-100" id="content-scroll">

                    {{ block "main" .}} {{ end }}
                </div>
            </div>
        </main>
        {{ partial "footer.html" . }}

        <script type="text/javascript" id="cookiebanner" src="{{ (resources.Get "js/cookiebanner.js").Permalink }}"
            data-height="20pt"
            data-message="{{- i18n "cookiebanner_msg" -}}"
            data-linkmsg="{{- i18n "cookiebanner_link" -}}"></script>
    </body>
</html>
